<?phprequire_once( '../../php/xmlrpc.php' );$PRIVATE_PATH = '/media/c0d3/home/kschinkel/private/rtorrent/data/'; /*Replace this*/
$PUBLIC_PATH = '/DATA/';                                  /*with this*/

if(isset($_REQUEST['hash']) && isset($_REQUEST['list'])){  
    $ret = '{"files":[';        $i=0;    $parent_dir = $PUBLIC_PATH;    while(true){        $req = new rXMLRPCRequest(         new rXMLRPCCommand( "f.get_frozen_path", array($_REQUEST['hash'],$i)) );                if($req->success()){            if( $i > 0){                $ret .=',';            }            $filename = $req->val[0];            $fname = end(explode('/',$filename));            $mod_path = str_replace($PRIVATE_PATH,$PUBLIC_PATH,$filename);            $get_parent_path = str_replace($PRIVATE_PATH,"", $filename);            $list = explode('/',$get_parent_path);            if( count($list) > 1){                $get_parent_path = $list[0];                $parent_dir = ''.$PUBLIC_PATH.''.$get_parent_path.'/';            }            $file = '{"name":"' .$fname. '","fullpath":"' .$mod_path. '","type":"file"}';            $ret .= ''.$file.'';                    }else{            break;        }        $i = $i +1;             }    $ret .= '],"parentDirName":"' .$parent_dir. '","parentDirPath":"' .$parent_dir. '"}';        cachedEcho($ret,"application/json");}?>